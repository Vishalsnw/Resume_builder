name: Fix Invalid Imports

on:
  workflow_dispatch:  # Allows manual triggering

jobs:
  fix-imports:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Fix invalid imports
        run: |
          # Find JS/TS files
          FOUND_FILES=$(find ./src -type f -name "*.js" -o -name "*.jsx" -o -name "*.ts" -o -name "*.tsx")
          
          # Loop through each file
          for FILE in $FOUND_FILES; do
            echo "Processing $FILE"
            
            # Replace imports with numbers, hyphens, or brackets
            sed -i -E 's/^import[[:space:]]+([0-9]+|.*[-\[\].].*)[[:space:]]+from[[:space:]]+.*$/\/\/ REMOVED INVALID IMPORT/g' "$FILE"
            
            # Report if file was modified
            if [ $? -eq 0 ]; then
              echo "Processed $FILE"
            else
              echo "Error processing $FILE"
            fi
          done
      
      - name: Commit changes
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: "Fix invalid import statements"
          file_pattern: "src/**/*.js src/**/*.jsx src/**/*.ts src/**/*.tsx"
